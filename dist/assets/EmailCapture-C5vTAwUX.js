import{ai as E,r as s,j as e,X as N,n as v,B as C,f as D}from"./index-nEH-zVqm.js";function L(){const{addNotification:n,removeNotification:c,clearNotifications:u}=E();return{success:(t,r,i)=>n({type:"success",title:t,message:r,duration:i}),error:(t,r,i)=>n({type:"error",title:t,message:r,duration:i}),info:(t,r,i)=>n({type:"info",title:t,message:r,duration:i}),warning:(t,r,i)=>n({type:"warning",title:t,message:r,duration:i}),remove:c,clear:u}}const O="emailCaptureDismissed",H="emailCaptureSubscribed",g="emailCaptureLastShown",w={DELAY_BEFORE_SHOW:6e4,SCROLL_THRESHOLD:60};function k(){const[n,c]=s.useState(!1),[u,t]=s.useState(""),[r,i]=s.useState(!1),[d,x]=s.useState(!1),[o,b]=s.useState(!1),[l,S]=s.useState(!1),[m,y]=s.useState(!1),p=L();s.useEffect(()=>{if(!(typeof window>"u")){b(!0);return}},[]);const f=()=>{c(!1),b(!0),typeof window<"u"&&(sessionStorage.setItem(O,"true"),localStorage.setItem(g,Date.now().toString()))};s.useEffect(()=>{if(typeof window>"u"||o||l)return;const a=()=>{window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100>=w.SCROLL_THRESHOLD&&y(!0)};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[o,l]),s.useEffect(()=>{if(typeof window>"u"||o||l||n)return;const a=setTimeout(()=>{m&&(c(!0),typeof window<"u"&&localStorage.setItem(g,Date.now().toString()))},w.DELAY_BEFORE_SHOW);return()=>clearTimeout(a)},[o,l,n,m]),s.useEffect(()=>{},[o,l,n,r,m]);const j=async a=>{if(a.preventDefault(),!u.trim()){p.error("Error","Please enter a valid email");return}x(!0),await new Promise(h=>setTimeout(h,1e3)),i(!0),S(!0),p.success("Success!","Check your email for exclusive offers"),typeof window<"u"&&sessionStorage.setItem(H,"true"),setTimeout(()=>{f(),i(!1),t("")},3e3),x(!1)};return n?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm animate-in fade-in duration-300",onClick:f,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-md w-full mx-4 overflow-hidden animate-in slide-in-from-bottom-4 duration-500",onClick:a=>a.stopPropagation(),children:[e.jsx("button",{onClick:f,className:"absolute top-4 right-4 p-1 hover:bg-gray-100 rounded-full transition-colors z-10","aria-label":"Close",children:e.jsx(N,{className:"h-5 w-5 text-gray-500"})}),r?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(D,{className:"h-16 w-16 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Success!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Check your email for exclusive offers and early access to new features."}),e.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting you back..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-8 text-center",children:[e.jsx(v,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Don't Miss Out!"}),e.jsx("p",{className:"text-blue-100",children:"Get exclusive offers and early access to new features"})]}),e.jsx("div",{className:"p-8",children:e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Your Email"}),e.jsx("input",{id:"email",type:"email",placeholder:"you@example.com",value:u,onChange:a=>t(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",disabled:d})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-gray-700",children:["✓ Exclusive provider tips",e.jsx("br",{}),"✓ Early access to new features",e.jsx("br",{}),"✓ Special promotions & discounts",e.jsx("br",{}),"✓ No spam, unsubscribe anytime"]})}),e.jsx(C,{type:"submit",disabled:d,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 font-semibold",children:d?"Subscribing...":"Get Exclusive Offers"}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"We respect your privacy. Unsubscribe at any time."})]})})]})]})}):null}export{k as default};
