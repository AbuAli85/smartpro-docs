import{r as u,s as A,j as e,L as P,B as N,b as M,e as I,f as V,N as z,p as B}from"./index-Bf9_HjUM.js";import{I as h}from"./input-olZJr-vY.js";import{T as H}from"./textarea-L2zEU5d2.js";import{L as l,S as $,a as f,b as C,c as b,d as x}from"./label-mdeIg8pF.js";import{A as W}from"./arrow-left-Bo351JFA.js";import{R as J}from"./refresh-cw-DVBQZ_Ag.js";import{C as k}from"./copy-DjPZONkX.js";import"./check-DMdpgiLT.js";const q={MOCI:[{value:"NOC",label:"NOC"},{value:"Inquiry",label:"Inquiry"},{value:"Update",label:"Update Request"}],ROP:[{value:"Verification",label:"Verification"},{value:"Clearance",label:"Clearance"}],MOL:[{value:"LabourClearance",label:"Labour Clearance"},{value:"EmploymentConfirmation",label:"Employment Confirmation"}]};function U(c,d){return(c==="ar"?{general_manager:"المدير العام",director:"المدير",minister:"معالي الوزير",department_head:"رئيس القسم",custom:""}:{general_manager:"General Manager",director:"Director",minister:"Minister",department_head:"Department Head",custom:""})[d]||""}function E(c){if(!c)return"";const[d,s,g]=c.split("-");return!d||!s||!g?c:`${g}/${s}/${d}`}async function G(c){try{if(typeof window<"u"&&window.isSecureContext&&navigator?.clipboard?.writeText)return await navigator.clipboard.writeText(c),{ok:!0,method:"clipboard"};throw new Error("Clipboard API unavailable or insecure context")}catch(d){try{if(typeof document>"u")throw d;const s=document.createElement("textarea");s.value=c,s.setAttribute("readonly",""),s.style.position="fixed",s.style.top="-9999px",document.body.appendChild(s),s.select();const g=document.execCommand("copy");if(document.body.removeChild(s),!g)throw d;return{ok:!0,method:"fallback"}}catch(s){return{ok:!1,method:"fallback",error:s??d}}}}function D({entity:c,letterType:d,lang:s,authorityLevel:g,values:r}){const m=s==="ar"?`التاريخ: ${E(r.date||"")}`:`Date: ${r.date||""}`,n={ar:{company:"سمارت برو للأعمال والخدمات",sincerely:"وتفضلوا بقبول فائق الاحترام"},en:{company:"Smartpro Business Hub & Services",sincerely:"Sincerely"}},p=s==="ar"?`${n.ar.company}
مسقط، سلطنة عمان
www.smartprohub.com | support@smartprohub.com`:`${n.en.company}
Muscat, Oman
www.smartprohub.com | support@smartprohub.com`,j=r.recipient_org||(c==="MOCI"?s==="ar"?"وزارة التجارة والصناعة وترويج الاستثمار":"MOCI":c),y=r.recipient_role,_=y==="custom"?r.custom_recipient_role||"":U(s,y),i=s==="ar"?`إلى: ${_?_+" – ":""}${j}`:`To: ${_?_+", ":""}${j}`,o=r.subject||r.letter_title||"";return c==="MOCI"&&d==="NOC"?s==="ar"?[n.ar.company,m,i,`الموضوع: ${o||"خطاب عدم ممانعة"}`,"تحية طيبة وبعد،",g==="authorized_signatory"?`نحن، شركة ${r.company_name} (رقم السجل التجاري: ${r.company_cr})، لا نمانع في ${r.noc_purpose||"الغرض المذكور"} للموظف ${r.employee_name} (رقم البطاقة المدنية ${r.civil_id}).`:`نؤكد بأن ${r.employee_name} يعمل لدينا منذ ${r.employment_start_date} بقسم ${r.department}، ونصدر هذا الخطاب بناءً على طلبه.`,`${n.ar.sincerely}،`,`${r.signer_name} – ${r.signer_title}`,p].join(`

`):[n.en.company,m,i,`Subject: ${o||"No-Objection Certificate (NOC)"}`,"Dear Sir/Madam,",g==="authorized_signatory"?`We, ${r.company_name} (CR: ${r.company_cr}), hereby issue a No-Objection Certificate for ${r.employee_name} (Civil ID ${r.civil_id}) for the purpose of ${r.noc_purpose||"the stated activity"}.`:`${r.employee_name} has been employed with us since ${r.employment_start_date} in ${r.department}. This letter is issued upon request.`,`${n.en.sincerely},`,`${r.signer_name} – ${r.signer_title}`,p].join(`

`):c==="MOCI"&&d==="Inquiry"?s==="ar"?[n.ar.company,m,i,`الموضوع: ${o||"استفسار تنظيمي"}`,`نرجو إفادتنا بشأن ${r.request_details||"الموضوع المذكور"}. شركة ${r.company_name} (السجل التجاري ${r.company_cr}).`,`${n.ar.sincerely}،`,`${r.signer_name} – ${r.signer_title}`,p].join(`

`):[n.en.company,m,i,`Subject: ${o||"Regulatory Inquiry"}`,`We request guidance regarding ${r.request_details||"the stated matter"}. Company: ${r.company_name} (CR: ${r.company_cr}).`,`${n.en.sincerely},`,`${r.signer_name} – ${r.signer_title}`,p].join(`

`):c==="MOCI"&&d==="Update"?s==="ar"?[n.ar.company,m,i,`الموضوع: ${o||"طلب تحديث"}`,`نود إحاطتكم علماً بـ ${r.request_details||"المستجدات"} المتعلقة بشركتنا ${r.company_name} (السجل التجاري ${r.company_cr}).`,`${n.ar.sincerely}،`,`${r.signer_name} – ${r.signer_title}`,p].join(`

`):[n.en.company,m,i,`Subject: ${o||"Update Request"}`,`We would like to inform you of ${r.request_details||"recent updates"} regarding ${r.company_name} (CR: ${r.company_cr}).`,`${n.en.sincerely},`,`${r.signer_name} – ${r.signer_title}`,p].join(`

`):c==="ROP"&&d==="Verification"?s==="ar"?[n.ar.company,m,i,`الموضوع: ${o||"خطاب تحقق"}`,`نفيدكم بأن ${r.employee_name} يعمل لدينا، ونرفق بياناته لغرض التحقق.`,`${n.ar.sincerely}،`,`${r.signer_name} – ${r.signer_title}`,p].join(`

`):[n.en.company,m,i,`Subject: ${o||"Employment Verification"}`,`This is to confirm that ${r.employee_name} is employed with us. Details enclosed for verification.`,`${n.en.sincerely},`,`${r.signer_name} – ${r.signer_title}`,p].join(`

`):c==="ROP"&&d==="Clearance"?s==="ar"?[n.ar.company,m,i,`الموضوع: ${o||"طلب إفادة/خلو طرف"}`,`نلتمس تفضلكم بإصدار إفادة/خلو طرف بخصوص ${r.request_details||"المذكور"}.`,`${n.ar.sincerely}،`,`${r.signer_name} – ${r.signer_title}`,p].join(`

`):[n.en.company,m,i,`Subject: ${o||"Clearance Request"}`,`We kindly request the issuance of a clearance regarding ${r.request_details||"the subject matter"}.`,`${n.en.sincerely},`,`${r.signer_name} – ${r.signer_title}`,p].join(`

`):c==="MOL"&&d==="LabourClearance"?s==="ar"?[n.ar.company,m,i,`الموضوع: ${o||"طلب موافقة عمل"}`,`نلتمس تفضلكم بالموافقة على إجراءات تصريح العمل للموظف ${r.employee_name}، رقم البطاقة المدنية ${r.civil_id}.`,`${n.ar.sincerely}،`,`${r.signer_name} – ${r.signer_title}`,p].join(`

`):[n.en.company,m,i,`Subject: ${o||"Labour Clearance Request"}`,`We kindly request approval to proceed with a labour permit for ${r.employee_name} (Civil ID ${r.civil_id}).`,`${n.en.sincerely},`,`${r.signer_name} – ${r.signer_title}`,p].join(`

`):c==="MOL"&&d==="EmploymentConfirmation"?s==="ar"?[n.ar.company,m,i,`الموضوع: ${o||"تأكيد توظيف"}`,`نفيدكم بأن ${r.employee_name} يعمل لدينا منذ ${r.employment_start_date} في قسم ${r.department}.`,`${n.ar.sincerely}،`,`${r.signer_name} – ${r.signer_title}`,p].join(`

`):[n.en.company,m,i,`Subject: ${o||"Employment Confirmation"}`,`${r.employee_name} has been employed with us since ${r.employment_start_date} in ${r.department}.`,`${n.en.sincerely},`,`${r.signer_name} – ${r.signer_title}`,p].join(`

`):s==="ar"?`${n.ar.company}
${m}

(يرجى إكمال الحقول لاختيار النموذج المناسب)`:`${n.en.company}
${m}

(Please fill the fields to choose the correct template)`}function te(){u.useEffect(()=>{A({title:"Letter Automation Demo | TheSmartPro.io - Interactive Builder",description:"Try our interactive letter automation builder. Generate professional government letters for MOCI, ROP, and MOL in Arabic and English with smart templates.",keywords:"letter automation, government letters, NOC generator, letter builder, automation demo",type:"website",url:"https://thesmartpro.io/demo/letter-automation"})},[]);const[c,d]=u.useState("MOCI"),[s,g]=u.useState("NOC"),[r,m]=u.useState("ar"),[n,p]=u.useState("authorized_signatory"),[j,y]=u.useState("general_manager"),_=q[c]||[];u.useEffect(()=>{_.find(t=>t.value===s)||g(_[0]?.value||"NOC")},[c]);const[i,o]=u.useState({date:new Date().toISOString().slice(0,10),letter_title:"",subject:"",request_details:"",employee_name:"",civil_id:"",employment_start_date:"",department:"",noc_purpose:"",company_name:"Smartpro Business Hub & Services",company_cr:"CR-12345-OM",signer_name:"Abu Ali",signer_title:"Managing Director",recipient_name:"",recipient_org:"",recipient_role:j,custom_recipient_role:""});u.useEffect(()=>{o(t=>({...t,recipient_role:j}))},[j]);const w=u.useMemo(()=>({template_id:`gov_${c.toLowerCase()}_${s.toLowerCase()}_${r}_v1`,format:"pdf",lang:r,inputs:{authority_level:n,...i}}),[c,s,r,n,i]),S=u.useMemo(()=>D({entity:c,letterType:s,lang:r,authorityLevel:n,values:i}),[c,s,r,n,i]),[v,O]=u.useState(null),L=(t,a)=>{O({ok:t,text:a}),window.setTimeout(()=>O(null),2e3)},R=async t=>{const a=await G(t);a.ok?L(!0,a.method==="clipboard"?"Copied":"Copied (fallback)"):(console.error("Copy failed",a.error),L(!1,"Copy failed"))},T=()=>{d("MOCI"),g("NOC"),m("ar"),p("authorized_signatory"),y("general_manager"),o({date:new Date().toISOString().slice(0,10),letter_title:"",subject:"",request_details:"",employee_name:"",civil_id:"",employment_start_date:"",department:"",noc_purpose:"",company_name:"Smartpro Business Hub & Services",company_cr:"CR-12345-OM",signer_name:"Abu Ali",signer_title:"Managing Director",recipient_name:"",recipient_org:"",recipient_role:"general_manager",custom_recipient_role:""})};return u.useEffect(()=>{console.assert(E("2025-11-11")==="11/11/2025","formatDate failed");const t=D({entity:"X",letterType:"Y",lang:"en",authorityLevel:"authorized_signatory",values:{date:"2025-11-11"}});console.assert(t.includes("Smartpro Business Hub & Services"),"renderLetter header missing")},[]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Letter Automation Builder"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Interactive demo of workflow automation capabilities"})]}),e.jsx(P,{href:"/docs/workflow-automation",children:e.jsxs(N,{variant:"outline",className:"gap-2",children:[e.jsx(W,{className:"w-4 h-4"}),"Back to Docs"]})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto p-6",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:[e.jsx(M,{className:"shadow-lg rounded-2xl",children:e.jsxs(I,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Configuration"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{variant:"secondary",onClick:T,children:[e.jsx(J,{className:"w-4 h-4 mr-2"})," Reset"]}),e.jsxs(N,{onClick:()=>R(JSON.stringify(w,null,2)),children:[e.jsx(k,{className:"w-4 h-4 mr-2"})," Copy JSON"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Entity"}),e.jsxs($,{value:c,onValueChange:d,children:[e.jsx(f,{className:"mt-1",children:e.jsx(C,{})}),e.jsxs(b,{children:[e.jsx(x,{value:"MOCI",children:"MOCI"}),e.jsx(x,{value:"ROP",children:"ROP"}),e.jsx(x,{value:"MOL",children:"MOL"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Letter Type"}),e.jsxs($,{value:s,onValueChange:g,children:[e.jsx(f,{className:"mt-1",children:e.jsx(C,{})}),e.jsx(b,{children:(q[c]||[]).map(t=>e.jsx(x,{value:t.value,children:t.label},t.value))})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Language"}),e.jsxs($,{value:r,onValueChange:t=>m(t),children:[e.jsx(f,{className:"mt-1",children:e.jsx(C,{})}),e.jsxs(b,{children:[e.jsx(x,{value:"ar",children:"Arabic"}),e.jsx(x,{value:"en",children:"English"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Authority Level"}),e.jsxs($,{value:n,onValueChange:p,children:[e.jsx(f,{className:"mt-1",children:e.jsx(C,{})}),e.jsxs(b,{children:[e.jsx(x,{value:"authorized_signatory",children:"Authorized Signatory"}),e.jsx(x,{value:"hr_manager",children:"HR Manager"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Recipient Role"}),e.jsxs($,{value:j,onValueChange:t=>y(t),children:[e.jsx(f,{className:"mt-1",children:e.jsx(C,{})}),e.jsxs(b,{children:[e.jsx(x,{value:"general_manager",children:"General Manager / المدير العام"}),e.jsx(x,{value:"director",children:"Director / المدير"}),e.jsx(x,{value:"minister",children:"Minister / معالي الوزير"}),e.jsx(x,{value:"department_head",children:"Department Head / رئيس القسم"}),e.jsx(x,{value:"custom",children:"Custom"})]})]})]}),j==="custom"&&e.jsxs("div",{children:[e.jsx(l,{children:"Custom Recipient Role"}),e.jsx(h,{value:i.custom_recipient_role,onChange:t=>o(a=>({...a,custom_recipient_role:t.target.value}))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Recipient Name (optional)"}),e.jsx(h,{value:i.recipient_name,onChange:t=>o(a=>({...a,recipient_name:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Recipient Organization"}),e.jsx(h,{value:i.recipient_org,onChange:t=>o(a=>({...a,recipient_org:t.target.value}))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Letter Title"}),e.jsx(h,{value:i.letter_title,onChange:t=>o(a=>({...a,letter_title:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Subject"}),e.jsx(h,{value:i.subject,onChange:t=>o(a=>({...a,subject:t.target.value}))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Date"}),e.jsx(h,{type:"date",value:i.date,onChange:t=>o(a=>({...a,date:t.target.value}))})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx(l,{children:"Request Details / NOC Purpose"}),e.jsx(H,{value:i.request_details||i.noc_purpose,onChange:t=>o(a=>({...a,request_details:t.target.value,noc_purpose:t.target.value}))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Employee Name"}),e.jsx(h,{value:i.employee_name,onChange:t=>o(a=>({...a,employee_name:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Civil ID"}),e.jsx(h,{value:i.civil_id,onChange:t=>o(a=>({...a,civil_id:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Employment Start Date"}),e.jsx(h,{type:"date",value:i.employment_start_date,onChange:t=>o(a=>({...a,employment_start_date:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Department"}),e.jsx(h,{value:i.department,onChange:t=>o(a=>({...a,department:t.target.value}))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Company Name"}),e.jsx(h,{value:i.company_name,onChange:t=>o(a=>({...a,company_name:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx(l,{children:"CR Number"}),e.jsx(h,{value:i.company_cr,onChange:t=>o(a=>({...a,company_cr:t.target.value}))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Signer Name"}),e.jsx(h,{value:i.signer_name,onChange:t=>o(a=>({...a,signer_name:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Signer Title"}),e.jsx(h,{value:i.signer_title,onChange:t=>o(a=>({...a,signer_title:t.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Raw JSON Payload (for /v1/generate)"}),e.jsx("pre",{className:"mt-2 p-4 bg-muted rounded-xl overflow-auto text-xs max-h-64",children:JSON.stringify(w,null,2)})]}),v&&e.jsxs("div",{className:`flex items-center gap-2 text-sm ${v.ok?"text-green-700":"text-red-700"}`,children:[v.ok?e.jsx(V,{className:"w-4 h-4"}):e.jsx(z,{className:"w-4 h-4"}),e.jsx("span",{children:v.text})]})]})}),e.jsx(M,{className:"shadow-lg rounded-2xl",children:e.jsx(I,{className:"p-0",children:e.jsxs(B.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.25},className:"h-full",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Live Preview"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Auto-generated letter content (demo renderer)"})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:`whitespace-pre-wrap bg-white rounded-xl p-6 shadow-inner min-h-[480px] leading-8 ${r==="ar"?"text-right":"text-left"} ${r==="ar"?"[direction:rtl]":"[direction:ltr]"}`,children:S})}),e.jsx("div",{className:"p-6 pt-0 flex gap-2",children:e.jsxs(N,{onClick:()=>R(S),children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Copy Letter Text"]})})]})})})]})})]})}export{te as default,E as formatDate,D as renderLetter};
