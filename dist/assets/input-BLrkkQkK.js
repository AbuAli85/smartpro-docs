import{r as i,j as f,h as C}from"./index-DbxwpQyO.js";const g=i.createContext({isComposing:()=>!1,setComposing:()=>{},justEndedComposing:()=>!1,markCompositionEnd:()=>{}}),x=()=>i.useContext(g);function c(r){const s=i.useRef(r);s.current=r;const e=i.useRef(null);return e.current||(e.current=function(...l){return s.current.apply(this,l)}),e.current}function b(r={}){const{onKeyDown:s,onCompositionStart:e,onCompositionEnd:l}=r,u=i.useRef(!1),a=i.useRef(null),n=i.useRef(null),p=c(o=>{a.current&&(clearTimeout(a.current),a.current=null),n.current&&(clearTimeout(n.current),n.current=null),u.current=!0,e?.(o)}),m=c(o=>{a.current=setTimeout(()=>{n.current=setTimeout(()=>{u.current=!1})}),l?.(o)}),d=c(o=>{if(u.current&&(o.key==="Escape"||o.key==="Enter"&&!o.shiftKey)){o.stopPropagation();return}s?.(o)}),t=c(()=>u.current);return{onCompositionStart:p,onCompositionEnd:m,onKeyDown:d,isComposing:t}}function y({className:r,type:s,onKeyDown:e,onCompositionStart:l,onCompositionEnd:u,...a}){const n=x(),{onCompositionStart:p,onCompositionEnd:m,onKeyDown:d}=b({onKeyDown:t=>{const o=t.nativeEvent.isComposing||n.justEndedComposing();t.key==="Enter"&&o||e?.(t)},onCompositionStart:t=>{n.setComposing(!0),l?.(t)},onCompositionEnd:t=>{n.markCompositionEnd(),setTimeout(()=>{n.setComposing(!1)},100),u?.(t)}});return f.jsx("input",{type:s,"data-slot":"input",className:C("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),onCompositionStart:p,onCompositionEnd:m,onKeyDown:d,...a})}export{y as I};
