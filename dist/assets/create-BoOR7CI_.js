import{aN as _,y as D,r as j,j as e,b as g,c as p,d as v,aO as f,e as y,B as x,a0 as F,aM as m}from"./index-DIo96AMZ.js";import{I as u}from"./input-XW9KhG0P.js";import{L as a}from"./label-TTCYupU1.js";import{T as C}from"./textarea-DfCsO8IO.js";import{S,a as b,b as N,c as w,d as h}from"./select-DyQSLHyb.js";import{u as R}from"./useServices-D-vQJTLr.js";import{L as A}from"./loader-circle-DJBo0qB1.js";import{L as P}from"./lock-Bp1LyTDI.js";import{A as E}from"./arrow-left-DQhq1YZw.js";import{S as O}from"./save-BoPC5hJ-.js";import"./services-DW1evicl.js";function B({children:t,redirectTo:o="/marketplace/auth/sign-in"}){const{user:n,loading:c}=_(),[,l]=D();return j.useEffect(()=>{!c&&!n&&l(o)},[n,c,o,l]),c?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(A,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-gray-500",children:"Loading..."})]})}):n?e.jsx(e.Fragment,{children:t}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:e.jsxs(g,{className:"max-w-md w-full",children:[e.jsxs(p,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(P,{className:"h-6 w-6 text-gray-400"}),e.jsx(v,{children:"Authentication Required"})]}),e.jsx(f,{children:"Please sign in to access this page"})]}),e.jsx(y,{children:e.jsx(x,{onClick:()=>l(o),className:"w-full",children:"Sign In"})})]})})}const I=["Digital Marketing","Legal Services","Accounting","IT Services","Design & Branding","Consulting","Translation","HR Services","Web Development","Content Creation"];function M(){const[,t]=D(),{addService:o}=R(),{user:n}=_(),[c,l]=j.useState(!1),[r,q]=j.useState({title:"",description:"",category:"",base_price:"",currency:"OMR",estimated_duration:"",location:"",requirements:"",tags:[]}),L=async s=>{if(s.preventDefault(),!r.title||!r.description||!r.category||!r.base_price){m.error("Please fill in all required fields");return}if(!n){m.error("Please log in to create a service"),t("/marketplace/auth/sign-in");return}try{l(!0);const d=await o({title:r.title,description:r.description,category:r.category,base_price:parseFloat(r.base_price),currency:r.currency,estimated_duration:r.estimated_duration||void 0,location:r.location||void 0,requirements:r.requirements||void 0,tags:r.tags.length>0?r.tags:void 0,provider_id:n.id});m.success("Service created successfully!"),t(`/marketplace/services/${d.id}`)}catch(d){m.error(d?.message||"Failed to create service")}finally{l(!1)}},i=(s,d)=>{q(k=>({...k,[s]:d}))};return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>t("/marketplace/services"),children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Back to Services"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Service"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Add a new service to your offerings"})]})]}),e.jsx("form",{onSubmit:L,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(g,{children:[e.jsxs(p,{children:[e.jsx(v,{children:"Basic Information"}),e.jsx(f,{children:"Provide details about your service"})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"title",children:"Service Title *"}),e.jsx(u,{id:"title",value:r.title,onChange:s=>i("title",s.target.value),placeholder:"e.g., Professional Web Design",required:!0})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"description",children:"Description *"}),e.jsx(C,{id:"description",value:r.description,onChange:s=>i("description",s.target.value),placeholder:"Describe your service in detail...",rows:5,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"category",children:"Category *"}),e.jsxs(S,{value:r.category,onValueChange:s=>i("category",s),required:!0,children:[e.jsx(b,{children:e.jsx(N,{placeholder:"Select category"})}),e.jsx(w,{children:I.map(s=>e.jsx(h,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"currency",children:"Currency *"}),e.jsxs(S,{value:r.currency,onValueChange:s=>i("currency",s),children:[e.jsx(b,{children:e.jsx(N,{})}),e.jsxs(w,{children:[e.jsx(h,{value:"OMR",children:"OMR (Omani Rial)"}),e.jsx(h,{value:"USD",children:"USD (US Dollar)"}),e.jsx(h,{value:"EUR",children:"EUR (Euro)"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"base_price",children:"Base Price *"}),e.jsx(u,{id:"base_price",type:"number",step:"0.01",min:"0",value:r.base_price,onChange:s=>i("base_price",s.target.value),placeholder:"0.00",required:!0})]})]})]}),e.jsxs(g,{children:[e.jsxs(p,{children:[e.jsx(v,{children:"Additional Details"}),e.jsx(f,{children:"Optional information about your service"})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(a,{htmlFor:"estimated_duration",children:"Estimated Duration"}),e.jsx(u,{id:"estimated_duration",value:r.estimated_duration,onChange:s=>i("estimated_duration",s.target.value),placeholder:"e.g., 2-3 weeks, 1 month"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"location",children:"Location"}),e.jsx(u,{id:"location",value:r.location,onChange:s=>i("location",s.target.value),placeholder:"e.g., Muscat, Oman or Remote"})]}),e.jsxs("div",{children:[e.jsx(a,{htmlFor:"requirements",children:"Requirements"}),e.jsx(C,{id:"requirements",value:r.requirements,onChange:s=>i("requirements",s.target.value),placeholder:"What do clients need to provide? (e.g., brand guidelines, content, etc.)",rows:3})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsxs(x,{type:"button",variant:"outline",onClick:()=>t("/marketplace/services"),children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(x,{type:"submit",disabled:c,children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),c?"Creating...":"Create Service"]})]})]})})]})}function Q(){return e.jsx(B,{children:e.jsx(M,{})})}export{Q as default};
