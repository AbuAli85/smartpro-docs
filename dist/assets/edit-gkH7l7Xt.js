import{y as L,Q as B,r as l,j as e,b as x,c as p,d as v,e as j,B as o,aO as b,a0 as O,aM as d}from"./index-DIo96AMZ.js";import{I as u}from"./input-XW9KhG0P.js";import{L as t}from"./label-TTCYupU1.js";import{T as C}from"./textarea-DfCsO8IO.js";import{S as N,a as _,b as q,c as D,d as m}from"./select-DyQSLHyb.js";import{a as T}from"./services-DW1evicl.js";import{u as U}from"./useServices-D-vQJTLr.js";import{A as I}from"./arrow-left-DQhq1YZw.js";import{S as M}from"./save-BoPC5hJ-.js";const A=["Digital Marketing","Legal Services","Accounting","IT Services","Design & Branding","Consulting","Translation","HR Services","Web Development","Content Creation"];function K(){const[,c]=L(),[P,h]=B("/marketplace/services/:id/edit"),{updateService:k}=U(),[F,g]=l.useState(!0),[y,f]=l.useState(!1),[n,w]=l.useState(null),[s,S]=l.useState({title:"",description:"",category:"",base_price:"",currency:"OMR",estimated_duration:"",location:"",requirements:""});l.useEffect(()=>{async function r(){if(h?.id)try{g(!0);const i=await T(h.id);w(i),S({title:i.title,description:i.description,category:i.category,base_price:i.base_price.toString(),currency:i.currency,estimated_duration:i.estimated_duration||"",location:i.location||"",requirements:i.requirements||""})}catch(i){d.error(i?.message||"Failed to load service"),c("/marketplace/services")}finally{g(!1)}}r()},[h?.id,c]);const R=async r=>{if(r.preventDefault(),!s.title||!s.description||!s.category||!s.base_price){d.error("Please fill in all required fields");return}if(n)try{f(!0),await k(n.id,{title:s.title,description:s.description,category:s.category,base_price:parseFloat(s.base_price),currency:s.currency,estimated_duration:s.estimated_duration||void 0,location:s.location||void 0,requirements:s.requirements||void 0}),d.success("Service updated successfully!"),c(`/marketplace/services/${n.id}`)}catch(i){d.error(i?.message||"Failed to update service")}finally{f(!1)}},a=(r,i)=>{S(E=>({...E,[r]:i}))};return F?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Loading service..."})]})})}):n?e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsxs(o,{variant:"ghost",size:"sm",onClick:()=>c(`/marketplace/services/${n.id}`),children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Back to Service"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Service"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Update your service information"})]})]}),e.jsx("form",{onSubmit:R,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(v,{children:"Basic Information"}),e.jsx(b,{children:"Update details about your service"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"title",children:"Service Title *"}),e.jsx(u,{id:"title",value:s.title,onChange:r=>a("title",r.target.value),placeholder:"e.g., Professional Web Design",required:!0})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"description",children:"Description *"}),e.jsx(C,{id:"description",value:s.description,onChange:r=>a("description",r.target.value),placeholder:"Describe your service in detail...",rows:5,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"category",children:"Category *"}),e.jsxs(N,{value:s.category,onValueChange:r=>a("category",r),required:!0,children:[e.jsx(_,{children:e.jsx(q,{placeholder:"Select category"})}),e.jsx(D,{children:A.map(r=>e.jsx(m,{value:r,children:r},r))})]})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"currency",children:"Currency *"}),e.jsxs(N,{value:s.currency,onValueChange:r=>a("currency",r),children:[e.jsx(_,{children:e.jsx(q,{})}),e.jsxs(D,{children:[e.jsx(m,{value:"OMR",children:"OMR (Omani Rial)"}),e.jsx(m,{value:"USD",children:"USD (US Dollar)"}),e.jsx(m,{value:"EUR",children:"EUR (Euro)"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"base_price",children:"Base Price *"}),e.jsx(u,{id:"base_price",type:"number",step:"0.01",min:"0",value:s.base_price,onChange:r=>a("base_price",r.target.value),placeholder:"0.00",required:!0})]})]})]}),e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(v,{children:"Additional Details"}),e.jsx(b,{children:"Optional information about your service"})]}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"estimated_duration",children:"Estimated Duration"}),e.jsx(u,{id:"estimated_duration",value:s.estimated_duration,onChange:r=>a("estimated_duration",r.target.value),placeholder:"e.g., 2-3 weeks, 1 month"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"location",children:"Location"}),e.jsx(u,{id:"location",value:s.location,onChange:r=>a("location",r.target.value),placeholder:"e.g., Muscat, Oman or Remote"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"requirements",children:"Requirements"}),e.jsx(C,{id:"requirements",value:s.requirements,onChange:r=>a("requirements",r.target.value),placeholder:"What do clients need to provide? (e.g., brand guidelines, content, etc.)",rows:3})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4",children:[e.jsxs(o,{type:"button",variant:"outline",onClick:()=>c(`/marketplace/services/${n.id}`),children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(o,{type:"submit",disabled:y,children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),y?"Saving...":"Save Changes"]})]})]})})]}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(x,{className:"border-red-200 bg-red-50",children:[e.jsx(p,{children:e.jsx(v,{className:"text-red-600",children:"Service Not Found"})}),e.jsx(j,{children:e.jsx(o,{onClick:()=>c("/marketplace/services"),children:"Back to Services"})})]})})}export{K as default};
