import{r as c,aM as a}from"./index-DIo96AMZ.js";import{g as w,c as M,u as F,d as b}from"./services-DW1evicl.js";function k(e){return e?JSON.stringify({category:e.category,provider_id:e.provider_id,status:e.status,page:e.page,limit:e.limit,search:e.search}):"default"}function _(e){const[g,o]=c.useState([]),[S,n]=c.useState(!0),[y,d]=c.useState(null),p=c.useMemo(()=>k(e),[e?.category,e?.provider_id,e?.status,e?.page,e?.limit,e?.search]),v=c.useRef(e);c.useEffect(()=>{v.current=e},[e]);const u=c.useCallback(async()=>{try{n(!0),d(null);const t=await w(v.current);o(t)}catch(t){const r=t?.message||"Failed to load services";d(r),a.error(r)}finally{n(!1)}},[p]);c.useEffect(()=>{u()},[u]);const m=c.useCallback(async t=>{try{const r=await M(t);return o(s=>[r,...s]),a.success("Service created successfully"),r}catch(r){const s=r?.message||"Failed to create service";throw a.error(s),r}},[]),h=c.useCallback(async(t,r)=>{try{const s=await F(t,r);return o(i=>i.map(l=>l.id===t?s:l)),a.success("Service updated successfully"),s}catch(s){const i=s?.message||"Failed to update service";throw a.error(i),s}},[]),f=c.useCallback(async t=>{try{await b(t),o(r=>r.filter(s=>s.id!==t)),a.success("Service deleted successfully")}catch(r){const s=r?.message||"Failed to delete service";throw a.error(s),r}},[]);return{services:g,loading:S,error:y,addService:m,updateService:h,deleteService:f,refetch:u}}export{_ as u};
